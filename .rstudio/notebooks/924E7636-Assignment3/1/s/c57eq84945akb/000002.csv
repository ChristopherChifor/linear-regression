"0","#select variables from data that we need for analysis"
"0","survey_data <- "
"0","  survey_data %>% "
"0","  select(age, age_range, p3, q3, q4) %>%"
"0","  rename(sex = q3, province = q4, vote = p3)"
"0","#filter data"
"0","#We start by reducing the survey's Gender variable into just male and female by removing all non-binary observations, this won't be an ethical or statistical issue as among all individuals surveyed there was only 1 case that reported identifying as neither a male or female, which represents less than 0.1% of the total observations in the survey."
"0","#Then, given that we have Gender as a binary variable we make the assumption that its proportion of male and female observations is a good enough estimate for us to accurately impute sex from gender."
"0","survey_data <- "
"0","  survey_data %>% "
"0","  filter(sex == ""1"" | sex == ""2"")"
"0","survey_data <- "
"0","  survey_data %>% "
"0","  filter(province %in% (1:10))"
"0","survey_data <- "
"0","  survey_data %>% "
"0","  filter(vote %in% (1:7))"
"0","#convert categorical data from numeric to string"
"0","survey_data$province <- as.character(survey_data$province)"
"0","survey_data$sex <- as.character(survey_data$sex)"
"0","survey_data$vote <- as.character(survey_data$vote)"
"0","#replace sex key with sex title"
"0","survey_data$sex[survey_data$sex == ""1""] <- ""Male"""
"0","survey_data$sex[survey_data$sex == ""2""] <- ""Female"""
"0","#replace province key with province name"
"0","survey_data$province[survey_data$province == ""1""] <- ""Newfoundland and Labrador"""
"0","survey_data$province[survey_data$province == ""2""] <- ""Prince Edward Island"""
"0","survey_data$province[survey_data$province == ""3""] <- ""Nova Scotia"""
"0","survey_data$province[survey_data$province == ""4""] <- ""New Brunswick"""
"0","survey_data$province[survey_data$province == ""5""] <- ""Quebec"""
"0","survey_data$province[survey_data$province == ""6""] <- ""Ontario"""
"0","survey_data$province[survey_data$province == ""7""] <- ""Manitoba"""
"0","survey_data$province[survey_data$province == ""8""] <- ""Saskatchewan"""
"0","survey_data$province[survey_data$province == ""9""] <- ""Alberta"""
"0","survey_data$province[survey_data$province == ""10""] <- ""British Columbia"""
"0","#replace party key with party name"
"0","survey_data$vote[survey_data$vote == ""1""] <- ""Liberal Party"""
"0","survey_data$vote[survey_data$vote == ""2""] <- ""Conservative Party"""
"0","survey_data$vote[survey_data$vote == ""3""] <- ""NDP"""
"0","survey_data$vote[survey_data$vote == ""4""] <- ""Bloc Québécois"""
"0","survey_data$vote[survey_data$vote == ""5""] <- ""Green Party"""
"0","survey_data$vote[survey_data$vote == ""6""] <- ""People's Party"""
"0","survey_data$vote[survey_data$vote == ""7""] <- ""Other"""
"0","#replace age_range key with age range"
"0","survey_data$age_range[survey_data$age_range == ""1""] <- ""18-24"""
"0","survey_data$age_range[survey_data$age_range == ""2""] <- ""25-34"""
"0","survey_data$age_range[survey_data$age_range == ""3""] <- ""35-44"""
"0","survey_data$age_range[survey_data$age_range == ""4""] <- ""45-54"""
"0","survey_data$age_range[survey_data$age_range == ""5""] <- ""55+"""
"0","         "
"0","#select age, province, and sex from census"
"0","#filter out data that does not include the province or the sex of the respondent"
"0","#filter out respondents who aren't old enough to vote"
"0","census_data <- census_data %>% "
"0","  mutate(age=round(age)) %>% "
"0","  filter(province == ""Newfoundland and Labrador""| "
"0","         province == ""Prince Edward Island""|"
"0","         province == ""Nova Scotia""| "
"0","         province == ""New Brunswick""|"
"0","         province == ""Quebec""| "
"0","         province == ""Ontario""|"
"0","         province == ""Manitoba""| "
"0","         province == ""Saskatchewan""|"
"0","         province == ""Alberta""| "
"0","         province == ""British Columbia"") %>%"
"0","  filter(sex == ""Female"" | sex == ""Male"") %>%"
"0","  filter(age >= 18) %>%"
"0","  select(age, sex, province)%>%"
"0","  rename(age_range = age)"
"0","#census_data$age_range <- as.character(census_data$age_range)"
"0","#replace age with age range"
"0","census_data$age_range[census_data$age_range >= 18 &census_data$age_range <=24] <- ""18-24"""
"0","census_data$age_range[census_data$age_range >= 25 &census_data$age_range <=34] <- ""25-34"""
"0","census_data$age_range[census_data$age_range >= 35 &census_data$age_range <=44] <- ""35-44"""
"0","census_data$age_range[census_data$age_range >= 45 &census_data$age_range <=54] <- ""45-54"""
"0","census_data$age_range[census_data$age_range >= 55] <- ""55+"""
