"0","#Cleaning Process:"
"0","#We use the select function to keep only the response and 3 predictor variables we will use in our model: age, q3/gender, q4/province or territory where the individual lives."
"0","survey_data <- "
"0","  survey_data %>% "
"0","  mutate(age = 2019-q2) %>% "
"0","  select(age, p3,q3,q4)"
"0","#Now, to be able to map survey data with census data we need to further clean our data to make sure the variable possible values are the same in both datasets."
"0","#We start by reducing Gender into just male and female and then using this data to impute sex from gender. This wonÂ´t result in any ethical or statistical malpractice as among all individuals surveyed there was only 1 case that reported identifying as neither a male or female."
"0","survey_data <- survey_data %>% filter(q3 == ""1"" | q3 == ""2"")"
"0","# Then for q4 which refers to the province in which the individual surveyed lives we get rid of all observations that fail to provide an answer as well as those provinces with no observations."
"0","survey_data <- "
"0","  survey_data %>% "
"0","  filter(q4 %in% (1:10))"
"0","#Finally we filter for our response variable, this this part we are filtering out all the observations that failed to provide a correct answer for this question of the survey"
"0","survey_data <- "
"0","  survey_data %>% "
"0","  filter(p3 %in% (1:8))"
"0","         "
"0","#In a similar fashion we clean our census data to make sure it matches with what we just did with our survey data"
"0","census_data <- census_data %>% "
"0","  mutate(age=round(age)) %>% "
"0","  filter(province == ""Newfoundland and Labrador""| "
"0","         province == ""Prince Edward Island""|"
"0","         province == ""Nova Scotia""| province == ""New Brunswick""|"
"0","         province == ""Quebec""| province == ""Ontario""|"
"0","         province == ""Manitoba""| province == ""Saskatchewan""|"
"0","         province == ""Alberta""| province == ""British Columbia"") %>%"
"0","  filter(sex == ""Female"" | sex == ""Male"") %>%"
"0","  select(age, sex, province)"
"0","#update sex to survey sex code"
"0","census_data$sex[census_data$sex == ""Male""] <- 1"
"0","census_data$sex[census_data$sex == ""Female""] <- 2"
"0","#change province names to survey province code"
"0","census_data$province[census_data$province == ""Newfoundland and Labrador""] <- 1"
"0","census_data$province[census_data$province == ""Prince Edward Island""] <- 2"
"0","census_data$province[census_data$province == ""Nova Scotia""] <- 3"
"0","census_data$province[census_data$province == ""New Brunswick""] <- 4"
"0","census_data$province[census_data$province == ""Quebec""] <- 5"
"0","census_data$province[census_data$province == ""Ontario""] <- 6"
"0","census_data$province[census_data$province == ""Manitoba""] <- 7"
"0","census_data$province[census_data$province == ""Saskatchewan""] <- 8"
"0","census_data$province[census_data$province == ""Alberta""] <- 9"
"0","census_data$province[census_data$province == ""British Columbia""] <- 10"
"0","#convert char columns in census to numeric"
"0","census_data$sex <- as.numeric(as.character(census_data$sex))"
"0","census_data$province <- as.numeric(as.character(census_data$province))"
